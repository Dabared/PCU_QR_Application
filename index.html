<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional QR Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        #qrcode canvas, #qrcode img {
            margin: 0 auto;
            border: 10px solid white;
            border-radius: 8px;
        }
        .qr-wrapper {
            position: relative;
            display: inline-block;
        }
        #logo-preview {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 5px;
            display: none;
            padding: 2px;
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen py-10 px-4">
    <div class="max-w-2xl mx-auto bg-white shadow-2xl rounded-2xl overflow-hidden flex flex-col md:flex-row">
        
        <div class="p-8 md:w-1/2 bg-slate-50 border-r border-gray-100">
            <h2 class="text-xl font-bold mb-6 text-slate-800">Customize QR</h2>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">App Heading</label>
                <input type="text" id="header-input" oninput="updateHeader()" placeholder="Enter Company Name" 
                       class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none">
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Target Link (URL)</label>
                <input type="text" id="url-input" placeholder="https://example.com" 
                       class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none">
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-1">Add Logo (Optional)</label>
                <input type="file" id="logo-input" accept="image/*" 
                       class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer">
            </div>

            <button onclick="generateQR()" 
                    class="w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 shadow-md transition duration-200">
                Generate QR Now
            </button>
        </div>

        <div class="p-8 md:w-1/2 text-center flex flex-col justify-center items-center">
            <h1 id="display-header" class="text-2xl font-black text-slate-800 mb-6 uppercase tracking-wider">YOUR BRAND</h1>
            
            <div class="qr-wrapper" id="qr-wrapper">
                <div id="qrcode"></div>
                <img id="logo-preview" src="" alt="logo">
            </div>

            <div id="download-area" class="mt-8 hidden">
                <button onclick="downloadQR()" class="flex items-center text-indigo-600 font-semibold hover:text-indigo-800">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    Download High Quality PNG
                </button>
            </div>
        </div>
    </div>

    <script>
        function updateHeader() {
            const input = document.getElementById('header-input').value;
            document.getElementById('display-header').innerText = input || "YOUR BRAND";
        }

        function generateQR() {
            const url = document.getElementById('url-input').value;
            const qrContainer = document.getElementById('qrcode');
            const logoInput = document.getElementById('logo-input');
            const logoPreview = document.getElementById('logo-preview');
            const downloadArea = document.getElementById('download-area');

            if (!url) {
                alert("Please enter a URL first!");
                return;
            }

            // Reset and Generate QR
            qrContainer.innerHTML = "";
            new QRCode(qrContainer, {
                text: url,
                width: 250,
                height: 250,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H // High error correction for logo overlay
            });

            // Handle Logo Overlay
            if (logoInput.files && logoInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    logoPreview.src = e.target.result;
                    logoPreview.style.display = 'block';
                }
                reader.readAsDataURL(logoInput.files[0]);
            } else {
                logoPreview.style.display = 'none';
            }

            downloadArea.classList.remove('hidden');
        }

        function downloadQR() {
            // සිංහලෙන් සරලවම කිව්වොත් මේකෙන් කරන්නේ preview එකේ තියෙන ඔක්කොම අරන් එක image එකක් කරන එක
            const qrCanvas = document.querySelector('#qrcode canvas');
            const logo = document.getElementById('logo-preview');
            const finalCanvas = document.createElement('canvas');
            const ctx = finalCanvas.getContext('2d');

            finalCanvas.width = qrCanvas.width;
            finalCanvas.height = qrCanvas.height;

            // Draw QR
            ctx.drawImage(qrCanvas, 0, 0);

            // Draw Logo on top if exists
            if (logo.style.display !== 'none') {
                const logoSize = 50;
                const x = (finalCanvas.width - logoSize) / 2;
                const y = (finalCanvas.height - logoSize) / 2;
                
                // White background for logo
                ctx.fillStyle = "white";
                ctx.fillRect(x - 2, y - 2, logoSize + 4, logoSize + 4);
                ctx.drawImage(logo, x, y, logoSize, logoSize);
            }

            const link = document.createElement('a');
            link.download = 'brand-qr-code.png';
            link.href = finalCanvas.toDataURL();
            link.click();
        }
    </script>
</body>
</html>
